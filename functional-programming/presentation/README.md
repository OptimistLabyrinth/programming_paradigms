# 함수형 프로그래밍 시작해보기

## 0. 목차

> [1. 장점](#1-장점)
>
> [2. 구성요소](#2-구성요소)
>> [2.1. 함수의 순수성 보장](#21-함수의-순수성함수의-무결성-보장)
>> [2.2. 변수의 불변성 보장](#22-변수의-불변성-보장)
>
> [3. 적용하기](#3-적용하기)
>> [3.1. 비순수 함수와 순수 함수의 분리](#31-비순수-함수와-순수-함수의-분리)
>> [3.2. 암시적 입출력에서 명시적 입출력으로의 변환](#32-암시적-입출력에서-명시적-입출력으로의-변환)
>> [3.3. 수정 시 복사(Copy-On-Write)](#33-수정-시-복사copy-on-write)
>> [3.4. 계층형 설계 패턴](#34-계층형-설계-패턴)
>
> [4. 더 적용해보기](#4-더-적용해보기)
>
> [5. 여전히 답하지 못하는 질문들](#5-여전히-답하지-못하는-질문들)
>

## 1. 장점

함수형 프로그래밍을 학습하면서 개인적으로 느낀점

-> 실용적이다
-> 범용적으로 적용하기에 좋다

## 2. 구성요소

함수형 프로그래밍에 대해서 학습하다보면 아주 다양한 키워드를 만나게 된다

순수 함수(pure function)
불변성(immutability), 불변 자료구조(persistent data structure)
메모이제이션(Memoization), 지연 계산(lazy evaluation)
일급 객체(first class citizen), 고차 함수(higher order function), 커링(currying)
재귀(recursion)
모노이드(monoid), 함수 합성(function composition)
모나드(monad) 그리고 펑터(functor)
패턴 매칭(pattern matching)

모든 것을 다루려고 하다가 어떤 것도 제대로 알지 못할 수 있으니까
핵심적인 요소에 집중해보자

### 2.1. 함수의 순수성(함수의 무결성) 보장

#### 2.1.1 함수란 무엇일까

Set X           Set Y
  x1   -- f -->   y1
  x2   -- f -->   y2
  x3   -- f -->   y3

X 에 있는 어떤 요소를 입력으로 사용하더라도 f(x) 로 연산하면 Y 에 있는 요소 중 하나가 나오는 경우

#### 2.1.2. 순수 함수형 프로그래밍(pure functional programming)이란 무엇일까

여기서 "순수" 라는 단어의 의미는
    부수 효과(side effect)가 전혀 없다
    입력-출력 쌍으로 Lookup Table 을 만들 수 있다
부수 효과(side effect)는 무엇일까: 예시 ->
    변수에 다른 값을 대입하기
    데이터 스트럭쳐를 in-place 로 수정하기
    어떤 객체의 필드의 값 변경하기
    예외 발생시키기
    콘솔에 입출력하기
    파일에서 데이터 읽거나 쓰기
    스크린에 모양 그리기
    * 사실 부수효과를 없애려고 하면 프로그래밍으로 유용한 행동은 아무것도 할 수 없다.
    * 현실적으로는 부수 효과를 일으킬 수 밖에 없다
선언적(declarative) 스타일을 선택한다, 절차형(imperative) 스타일이 아닌
    어떻게(How) 대신에 무엇(What) 을 해야하는지 서술한다

#### 2.1.3. 함수형 프로그래밍을 하면 다른 프로그래밍 패러다임을 모두 버려야할까

함수형 프로그래밍 스타일은 프로그래머에게 양자택일을 강요하지 않는다
함수형 프로그래밍을 하기 위해서 기존에 프로그래밍에 대해서 알고 있는 것을 전부 다 잊어버리고 새롭게 시작해야 할까
결코 아니다
기존에 프로그래밍에 대해서 알고 있는 지식을 바탕으로
함수형 프로그래밍의 원리를 조금만 첨가하면 기존의 코드를 적은 노력을 상당히 개선할 수 있다

#### 2.1.4. 순수 함수는 왜 필요할까

예를 들어서

```javascript
    x = [ 'a', 'b', 'c' ]
    y = a(x)
    x = ?
```

여기서 마지막 줄 x 에는 어떤 값이 들어가게 될까
이를 알기 위해서는 함수 a 내부구현을 한줄씩 읽어보면서 파라미터 x 를 변경하는 코드가 있는지 없는지 확인한다
그러면 마지막 줄 x 에 어떤 값이 들어있는 확실하게 장담할 수 있다

또다른 예시를 보자

```javascript
    x = [ 'a', 'b', 'c' ]
    y = c(a(x) + b(x)) + d(x) * e(x) - 4 * (q(x) - f(x)) + k(x) * m(x) - 4 * (q(x) - t(x) + b(x))
        + d(x) / c(a(x) + y(x)) + z(x) * e(x) + p(x) + h(x) * floor(b(x)) + 16 * a(x)
        - ceil(u(x) - s(a(x) + b(x)) + v(x) * e(x) - 4(q(x) - f(x))) + d(x) * e(x)
        - 4 * ((q(x) + f(x)) + b(x)) + d(x) / c(h(x) - j(x)) + d(x) * o(x) + g2(x) + h3(x)
        * floor(w(x)) + 16 * u(x)
    x = ?
```

그리고 이 긴 연산의 중간 어딘가에

x[1] = 'Q'

처럼 x 값을 변경하는 코드가 포함되어 있기라도 한다면
우리는 더 이상 마지막 줄 x 에 무엇이 들어있을지 확신할 수 없게 된다
이런 골치아픈 상황을 막기 위해서 모든 함수에서 부수 효과를 제거하기로 약속한다

### 2.2. 변수의 불변성 보장

불변성을 보장하는 가장 간단한 방법은 복제본을 만드는 것이다
그러면 본래의 항목은 기존의 값을 유지하고
새로운 항목에 변경 결과가 담겨있게 된다

이런 원리를 적용해서 만든 결과물이 "불변성 자료구조(Persistent Data Structure)" 이다

#### 2.2.1. 단방향 연결리스트 예시

#### 2.2.2. 불변성 트리구조를 이용한 내부 구현

#### 2.2.3. 불변성(immutability) vs 상수성(constancy)

프로그래밍에서 위의 두 단어는 서로 다른 의미를 가질까

## 3. 적용하기

### 3.1. 비순수 함수와 순수 함수의 분리

### 3.2. 암시적 입출력에서 명시적 입출력으로의 변환

### 3.3. 수정 시 복사(Copy-On-Write)

### 3.4. 계층형 설계 패턴

## 4. 더 적용해보기

## 5. 여전히 답하지 못하는 질문들

왜 함수형을 해야핦까
반드시 함수형이어야만 하는 이유가 있을까
